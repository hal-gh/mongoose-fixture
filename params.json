{"name":"Mongoose-fixture","tagline":"Mongoose-Fixture is a data management and workflow tool that enables developers to easily organize and import data into mongodb from both a CLI and nodejs API.","body":"# Getting Started with Mongoose-Fixture\r\n\r\n## What is Mongoose-Fixture?\r\n\r\nMongoose-Fixture is a data management and workflow tool that enables developers to easily organize and import data into mongodb from both a CLI and nodejs API.\r\n\r\n## Why should I use Mongoose-Fixture over mongoimport\r\n\r\nImporting data with ``mongoimport`` is easy if you have a single json data file.  But if you have several json data files each with sub-document dependencies, validation, and simply organizing the data becomes difficult. Mongoose-Fixture is designed to solve these issues.\r\n\r\n## Installation\r\n\r\nFirst you need to install the Mongoose-Fixture global so you have access to the ``bin`` CLI.  \r\n\r\n    npm install -g mongoose-fixture\r\n\r\nNext when you create a project you will want to install mongoose-fixture locally as well.\r\n\r\n    cd your_project/\r\n\t  npm init\r\n    npm install mongoose-fixture --save\r\n\r\nIf you are wondering why you are installing mongoose-fixture twice you may want to read - [npm Global vs Local installation](http://blog.nodejs.org/2011/03/23/npm-1-0-global-vs-local-installation/)\r\n\r\n## Configuring Mongoose-Fixture\r\n\r\nI'll now walk you through configuring mongoose-fixture for an example project.  I've created a separate working repository with all the code samples.\r\n\r\n### Generate a Mongoose-Fixture-Config\r\n\r\nFirst step in using Mongoose-Fixture one must create a mongoose-config file similarly to grunt.  This config file sets up file-paths, mongodb authentication, and most importantly the fixture/schema organization listings.\r\n    \r\n    # from inside your project folder\r\n    mongoose-fixture --generateConfig\r\n    \r\n    # you should see this output\r\n    Generating Fixture-Config -> /your_project/mongoose-fixture-config.js\r\n\r\n\r\nNow if you open your config file you will need to enter your mongodb server settings.  And you will see the default schema/fixture paths, you can change these if you want or keep the defaults.\r\n\r\n    var fixtureConfig = FixtureConfig({\r\n        mongoConnection:{\r\n            'host':'localhost',\r\n            'port':'27017',\r\n            'dbname':''\r\n        },\r\n        paths:{\r\n            schemaPath:__dirname+'/schemas/',\r\n            dataFixturePath:__dirname+'/fixtures/'\r\n        }\r\n    });\r\n\r\nRegardless if you keep or change the file paths you will need to create those folders (``schemas`` and ``fixtures``) in your local directory.\r\n\r\nThe remaining section of the config file is where you define the ``FixturePackages``.  The ``FixturePackages`` are how you organize json fixtures into packages so you can easily add/remove/reset groups of fixtures.  I'll delve further into packages later, but for now know that you define them here.  By default an 'all' package is provided so you can easily get started.\r\n\r\n### Generate a Fixture/Schema\r\n\r\nIf you haven't yet created your directories do so now\r\n\r\n    mkdir fixtures/\r\n    mkdir schemas/\r\n\r\nNow lets say we are doing an e-commerce app which needs products \r\n\r\n    # use our cli command to generate a fixture for products\r\n    mongoose-fixture --generateFixture='Products'\r\n\r\n    # output in cli showing the path used\r\n    Generating DataFixture -> /your_project/fixtures/Products.js\r\n\r\n    # use our cli to now create a schema\r\n    mongoose-fixture --generateSchema='ProductSchema'\r\n\r\n    # output in cli showing the path used\r\n    Generating Schema -> /your_project/schemas/ProductSchema.js\r\n\r\nBest place to start is to open the ``ProductSchema.js`` file and first define the schema for your product model.  You can view an example of the [completed version](https://github.com/mgan59/mongoose-fixture-example/blob/master/schemas/ProductSchema.js)\r\n\r\nNext we should start adding our actual products to the fixture file so open the ``fixtures/Products.js``.  You can view an example of the [completed version](https://github.com/mgan59/mongoose-fixture-example/blob/master/fixtures/Products.js)\r\n\r\n### Running the Fixture Import\r\n\r\nNow that we have a fixture/schema we should update our config file by adding the set to our ``FixturePackages`` 'all'.  You can view the [completed version](https://github.com/mgan59/mongoose-fixture-example/blob/master/mongoose-fixture-config.js)\r\n\r\nFinally, Time to run the fixture insert command **make sure your mongodb server is running**\r\n\r\n    mongoose-fixture --fixture='all' --add\r\n\r\nTo verify that the data was inserted connect to the mongo server and check.\r\n\r\n    mongo --port 27017\r\n\r\nOutput\r\n    MongoDB shell version: 2.2.2\r\n    connecting to: 127.0.0.1:27017/test\r\n    \r\n    > use fixture-test\r\n    switched to db fixture-test\r\n    > db.products.find().pretty()\r\n    {\r\n\t    \"name\" : \"Toy Box\",\r\n\t    \"price\" : 9.99,\r\n\t    \"qty\" : 20,\r\n\t    \"tags\" : [\r\n\t\t      \"toys\",\r\n\t\t      \"children\",\r\n\t\t      \"storage\"\r\n\t    ],\r\n\t    \"__v\" : 0,\r\n\t    \"_id\" : ObjectId(\"5201b338bb5b194c5d000001\")\r\n    }\r\n    {\r\n\t    \"name\" : \"Baseball Bat\",\r\n\t    \"price\" : 29.99,\r\n\t    \"qty\" : 6,\r\n\t    \"tags\" : [\r\n\t\t      \"sporting\",\r\n\t\t      \"baseball\",\r\n\t\t      \"outdoors\"\r\n\t    ],\r\n\t    \"__v\" : 0,\r\n\t    \"_id\" : ObjectId(\"5201b338bb5b194c5d000002\")\r\n    }\r\n\r\n\r\nYou could remove the data with a similar command\r\n\r\n    mongoose-fixture --fixture='all' --remove\r\n\r\nOr if you have the use case where you need to add and remove you can do it using the --reset \r\n\r\n    mongoose-fixture --fixture='all' --reset","google":"UA-43284729-1","note":"Don't delete this file! It's used internally to help with page regeneration."}